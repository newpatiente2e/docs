"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[525],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(r),m=a,y=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return r?n.createElement(y,i(i({ref:t},c),{},{components:r})):n.createElement(y,i({ref:t},c))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},8894:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=r(7462),a=(r(7294),r(3905));const o={},i="Add surgery roles",l={unversionedId:"surgery-roles/add-roles",id:"surgery-roles/add-roles",title:"Add surgery roles",description:"Create Static Web App roles",source:"@site/docs/40-surgery-roles/20-add-roles.md",sourceDirName:"40-surgery-roles",slug:"/surgery-roles/add-roles",permalink:"/docs/surgery-roles/add-roles",draft:!1,editUrl:"https://github.com/newpatiente2e/docs/tree/main/docs/40-surgery-roles/20-add-roles.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Static Web App roles",permalink:"/docs/surgery-roles/static-web-app-roles"},next:{title:"Summary",permalink:"/docs/summary"}},s={},p=[{value:"Create Static Web App roles",id:"create-static-web-app-roles",level:2},{value:"Securing web app routes with roles",id:"securing-web-app-routes-with-roles",level:2},{value:"Enable role-based access control",id:"enable-role-based-access-control",level:2},{value:"Redeploy Static Web App",id:"redeploy-static-web-app",level:2},{value:"Sign in to the surgery app",id:"sign-in-to-the-surgery-app",level:2}],c={toc:p};function d(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"add-surgery-roles"},"Add surgery roles"),(0,a.kt)("h2",{id:"create-static-web-app-roles"},"Create Static Web App roles"),(0,a.kt)("h2",{id:"securing-web-app-routes-with-roles"},"Securing web app routes with roles"),(0,a.kt)("p",null,"Access to the patient registration app is controlled by the roles and Static Web App routes are secured by the roles."),(0,a.kt)("p",null,"The patient registration app has several routes that are only accessible to users with specific roles. For example, the ",(0,a.kt)("inlineCode",{parentName:"p"},"/admin")," route is only accessible to users with the ",(0,a.kt)("inlineCode",{parentName:"p"},"admin")," role. The ",(0,a.kt)("inlineCode",{parentName:"p"},"/admin")," route is used to add new patient registrations in the app. The ",(0,a.kt)("inlineCode",{parentName:"p"},"/admin")," route is only accessible to users with the ",(0,a.kt)("inlineCode",{parentName:"p"},"admin")," role."),(0,a.kt)("h2",{id:"enable-role-based-access-control"},"Enable role-based access control"),(0,a.kt)("p",null,"TODO @AARON: Add the command to enable role-based access control. The following is just placeholder text."),(0,a.kt)("p",null,"Open the ",(0,a.kt)("inlineCode",{parentName:"p"},"contoso_new_patient_app/infra/azuredeploy.json")," file and add the following code to the ",(0,a.kt)("inlineCode",{parentName:"p"},"parameters")," section."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'"staticWebAppRoles": {\n    "type": "array",\n    "defaultValue": [\n        {\n            "name": "admin",\n            "displayName": "Admin",\n            "description": "Admin role"\n        },\n        {\n            "name": "doctor",\n            "displayName": "Doctor",\n            "description": "Doctor role"\n        },\n        {\n            "name": "nurse",\n            "displayName": "Nurse",\n            "description": "Nurse role"\n        }\n    ]\n}\n')),(0,a.kt)("h2",{id:"redeploy-static-web-app"},"Redeploy Static Web App"),(0,a.kt)("p",null,"Redeploy the app to Azure Static Web Apps with the Azure Developer CLI."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"From VS Code, select ",(0,a.kt)("inlineCode",{parentName:"p"},"Ctrl+Shift+~")," to open a new terminal.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"From the terminal, run the following command to start the function app. This command will deploy the updated function to Azure."),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"azd up ...\n")))),(0,a.kt)("h2",{id:"sign-in-to-the-surgery-app"},"Sign in to the surgery app"),(0,a.kt)("p",null,"Sign in to the surgery app."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"From the patient registration app, select ",(0,a.kt)("strong",{parentName:"li"},"Sign in"),", and then select the login provider you configured with roles when you created a role invitation in the previous section."),(0,a.kt)("li",{parentName:"ol"},"If you added the ",(0,a.kt)("strong",{parentName:"li"},"admin")," role to the invitation, then you can sign into the patient registration app and add new patients from the ",(0,a.kt)("strong",{parentName:"li"},"Admin")," tab."),(0,a.kt)("li",{parentName:"ol"},"If you also added the ",(0,a.kt)("strong",{parentName:"li"},"nurse")," or ",(0,a.kt)("strong",{parentName:"li"},"doctor")," roles to the invitation, then you can view patient details in the surgery app from the ",(0,a.kt)("strong",{parentName:"li"},"patients")," tab.")))}d.isMDXComponent=!0}}]);